
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dataset module &#8212; &lt;h1 style=&#34;font-size:2em;text-align:center;color:#FF5733&#34;&gt;Recommenders&lt;/h1&gt;</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/tabs.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title"><h1 style="font-size:2em;text-align:center;color:#FF5733">Recommenders</h1></h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p class="caption" role="heading">
 <span class="caption-text">
  Getting Started Notebooks
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../examples/00_quick_start/als_movielens.html">
   Running ALS on MovieLens (PySpark)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../examples/00_quick_start/ncf_movielens.html">
   Neural Collaborative Filtering on MovieLens dataset.
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/source/datasets.rst"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.rst</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/microsoft/genalog"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/microsoft/genalog/issues/new?title=Issue%20on%20page%20%2Fsource/datasets.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#recommendation-datasets">
   Recommendation datasets
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#amazon-reviews">
     Amazon Reviews
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#cord-19">
     CORD-19
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#criteo">
     Criteo
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#mind">
     MIND
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#movielens">
     MovieLens
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-recommenders.datasets.download_utils">
   Download utilities
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-recommenders.datasets.cosmos_cli">
   Cosmos CLI utilities
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-recommenders.datasets.pandas_df_utils">
   Pandas dataframe utilities
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-recommenders.datasets.python_splitters">
   Splitter utilities
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-recommenders.datasets.sparse">
   Sparse utilities
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-recommenders.datasets.wikidata">
   Knowledge graph utilities
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="dataset-module">
<span id="dataset"></span><h1>Dataset module<a class="headerlink" href="#dataset-module" title="Permalink to this headline">¶</a></h1>
<p>Recommendation datasets and related utilities</p>
<div class="section" id="recommendation-datasets">
<h2>Recommendation datasets<a class="headerlink" href="#recommendation-datasets" title="Permalink to this headline">¶</a></h2>
<div class="section" id="amazon-reviews">
<h3>Amazon Reviews<a class="headerlink" href="#amazon-reviews" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://snap.stanford.edu/data/web-Amazon.html">Amazon Reviews dataset</a> consists of reviews from Amazon.
The data span a period of 18 years, including ~35 million reviews up to March 2013. Reviews include product and user
information, ratings, and a plaintext review.</p>
<dl class="field-list simple">
<dt class="field-odd">Citation</dt>
<dd class="field-odd"><p>J. McAuley and J. Leskovec, “Hidden factors and hidden topics: understanding rating dimensions with review text”,
RecSys, 2013.</p>
</dd>
</dl>
<span class="target" id="module-recommenders.datasets.amazon_reviews"></span><dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.amazon_reviews.data_preprocessing">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.amazon_reviews.</span></span><span class="sig-name descname"><span class="pre">data_preprocessing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reviews_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_vocab</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">item_vocab</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cate_vocab</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_rate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.01</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_num_ngs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_num_ngs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_history_expanding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/amazon_reviews.html#data_preprocessing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.amazon_reviews.data_preprocessing" title="Permalink to this definition">¶</a></dt>
<dd><p>Create data for training, validation and testing from original dataset</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>reviews_file</strong> (<em>str</em>) – Reviews dataset downloaded from former operations.</p></li>
<li><p><strong>meta_file</strong> (<em>str</em>) – Meta dataset downloaded from former operations.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.amazon_reviews.download_and_extract">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.amazon_reviews.</span></span><span class="sig-name descname"><span class="pre">download_and_extract</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/amazon_reviews.html#download_and_extract"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.amazon_reviews.download_and_extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Downloads and extracts Amazon reviews and meta datafiles if they don’t already exist</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – Category of reviews.</p></li>
<li><p><strong>dest_path</strong> (<em>str</em>) – File path for the downloaded file.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>File path for the extracted file.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="cord-19">
<h3>CORD-19<a class="headerlink" href="#cord-19" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://azure.microsoft.com/en-us/services/open-datasets/catalog/covid-19-open-research/">COVID-19 Open Research Dataset (CORD-19)</a> is a full-text
and metadata dataset of COVID-19 and coronavirus-related scholarly articles optimized
for machine readability and made available for use by the global research community.</p>
<p>In response to the COVID-19 pandemic, the Allen Institute for AI has partnered with leading research groups
to prepare and distribute the COVID-19 Open Research Dataset (CORD-19), a free resource of
over 47,000 scholarly articles, including over 36,000 with full text, about COVID-19 and the
coronavirus family of viruses for use by the global research community.</p>
<p>This dataset is intended to mobilize researchers to apply recent advances in natural language processing
to generate new insights in support of the fight against this infectious disease.</p>
<dl class="field-list simple">
<dt class="field-odd">Citation</dt>
<dd class="field-odd"><p>Wang, L.L., Lo, K., Chandrasekhar, Y., Reas, R., Yang, J., Eide, D.,
Funk, K., Kinney, R., Liu, Z., Merrill, W. and Mooney, P. “Cord-19: The COVID-19 Open Research Dataset.”, 2020.</p>
</dd>
</dl>
<span class="target" id="module-recommenders.datasets.covid_utils"></span><dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.covid_utils.clean_dataframe">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.covid_utils.</span></span><span class="sig-name descname"><span class="pre">clean_dataframe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/covid_utils.html#clean_dataframe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.covid_utils.clean_dataframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Clean up the dataframe.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Pandas dataframe.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Cleaned pandas dataframe.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>df (pandas.DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.covid_utils.get_public_domain_text">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.covid_utils.</span></span><span class="sig-name descname"><span class="pre">get_public_domain_text</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">azure_storage_account_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'azureopendatastorage'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">azure_storage_sas_token</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/covid_utils.html#get_public_domain_text"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.covid_utils.get_public_domain_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all public domain text.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Metadata dataframe for public domain text.</p></li>
<li><p><strong>container_name</strong> (<em>str</em>) – Azure storage container name.</p></li>
<li><p><strong>azure_storage_account_name</strong> (<em>str</em>) – Azure storage account name.</p></li>
<li><p><strong>azure_storage_sas_token</strong> (<em>str</em>) – Azure storage SAS token.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dataframe with select metadata and full article text.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>df_full (pandas.DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.covid_utils.load_pandas_df">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.covid_utils.</span></span><span class="sig-name descname"><span class="pre">load_pandas_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">azure_storage_account_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'azureopendatastorage'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">azure_storage_sas_token</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'covid19temp'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata_filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'metadata.csv'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/covid_utils.html#load_pandas_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.covid_utils.load_pandas_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads the Azure Open Research COVID-19 dataset as a pd.DataFrame.</p>
<p>The Azure COVID-19 Open Research Dataset may be found at <a class="reference external" href="https://azure.microsoft.com/en-us/services/open-datasets/catalog/covid-19-open-research/">https://azure.microsoft.com/en-us/services/open-datasets/catalog/covid-19-open-research/</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>azure_storage_account_name</strong> (<em>str</em>) – Azure storage account name.</p></li>
<li><p><strong>azure_storage_sas_token</strong> (<em>str</em>) – Azure storage SAS token.</p></li>
<li><p><strong>container_name</strong> (<em>str</em>) – Azure storage container name.</p></li>
<li><p><strong>metadata_filename</strong> (<em>str</em>) – Name of file containing top-level metadata for the dataset.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Metadata dataframe.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>metadata (pandas.DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.covid_utils.remove_duplicates">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.covid_utils.</span></span><span class="sig-name descname"><span class="pre">remove_duplicates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cols</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/covid_utils.html#remove_duplicates"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.covid_utils.remove_duplicates" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove duplicated entries.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pd.DataFrame</em>) – Pandas dataframe.</p></li>
<li><p><strong>cols</strong> (<em>list of str</em>) – Name of columns in which to look for duplicates.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Pandas dataframe with duplicate rows dropped.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>df (pandas.DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.covid_utils.remove_nan">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.covid_utils.</span></span><span class="sig-name descname"><span class="pre">remove_nan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cols</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/covid_utils.html#remove_nan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.covid_utils.remove_nan" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove rows with NaN values in specified column.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Pandas dataframe.</p></li>
<li><p><strong>cols</strong> (<em>list of str</em>) – Name of columns in which to look for NaN.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Pandas dataframe with invalid rows dropped.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>df (pandas.DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.covid_utils.retrieve_text">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.covid_utils.</span></span><span class="sig-name descname"><span class="pre">retrieve_text</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entry</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">azure_storage_account_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'azureopendatastorage'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">azure_storage_sas_token</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/covid_utils.html#retrieve_text"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.covid_utils.retrieve_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve body text from article of interest.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>entry</strong> (<em>pd.Series</em>) – A single row from the dataframe (df.iloc[n]).</p></li>
<li><p><strong>container_name</strong> (<em>str</em>) – Azure storage container name.</p></li>
<li><p><strong>azure_storage_account_name</strong> (<em>str</em>) – Azure storage account name.</p></li>
<li><p><strong>azure_storage_sas_token</strong> (<em>str</em>) – Azure storage SAS token.</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Results:</dt><dd><p>text (str): Full text of the blob as a single string.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="criteo">
<h3>Criteo<a class="headerlink" href="#criteo" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://www.kaggle.com/c/criteo-display-ad-challenge/overview">Criteo dataset</a>, released by Criteo Labs, is an online advertising dataset that contains feature values and click feedback
for millions of display Ads. Every Ad has has 40 attributes, the first attribute is the label where a value 1 represents
that the Ad has been clicked on and a 0 represents it wasn’t clicked on. The rest consist of 13 integer columns and
26 categorical columns.</p>
<span class="target" id="module-recommenders.datasets.criteo"></span><dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.criteo.download_criteo">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.criteo.</span></span><span class="sig-name descname"><span class="pre">download_criteo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'sample'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">work_directory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/criteo.html#download_criteo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.criteo.download_criteo" title="Permalink to this definition">¶</a></dt>
<dd><p>Download criteo dataset as a compressed file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>size</strong> (<em>str</em>) – Size of criteo dataset. It can be “full” or “sample”.</p></li>
<li><p><strong>work_directory</strong> (<em>str</em>) – Working directory.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Path of the downloaded file.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.criteo.extract_criteo">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.criteo.</span></span><span class="sig-name descname"><span class="pre">extract_criteo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compressed_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/criteo.html#extract_criteo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.criteo.extract_criteo" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract Criteo dataset tar.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>size</strong> (<em>str</em>) – Size of Criteo dataset. It can be “full” or “sample”.</p></li>
<li><p><strong>compressed_file</strong> (<em>str</em>) – Path to compressed file.</p></li>
<li><p><strong>path</strong> (<em>str</em>) – Path to extract the file.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Path to the extracted file.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.criteo.get_spark_schema">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.criteo.</span></span><span class="sig-name descname"><span class="pre">get_spark_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['label',</span> <span class="pre">'int00',</span> <span class="pre">'int01',</span> <span class="pre">'int02',</span> <span class="pre">'int03',</span> <span class="pre">'int04',</span> <span class="pre">'int05',</span> <span class="pre">'int06',</span> <span class="pre">'int07',</span> <span class="pre">'int08',</span> <span class="pre">'int09',</span> <span class="pre">'int10',</span> <span class="pre">'int11',</span> <span class="pre">'int12',</span> <span class="pre">'cat00',</span> <span class="pre">'cat01',</span> <span class="pre">'cat02',</span> <span class="pre">'cat03',</span> <span class="pre">'cat04',</span> <span class="pre">'cat05',</span> <span class="pre">'cat06',</span> <span class="pre">'cat07',</span> <span class="pre">'cat08',</span> <span class="pre">'cat09',</span> <span class="pre">'cat10',</span> <span class="pre">'cat11',</span> <span class="pre">'cat12',</span> <span class="pre">'cat13',</span> <span class="pre">'cat14',</span> <span class="pre">'cat15',</span> <span class="pre">'cat16',</span> <span class="pre">'cat17',</span> <span class="pre">'cat18',</span> <span class="pre">'cat19',</span> <span class="pre">'cat20',</span> <span class="pre">'cat21',</span> <span class="pre">'cat22',</span> <span class="pre">'cat23',</span> <span class="pre">'cat24',</span> <span class="pre">'cat25']</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/criteo.html#get_spark_schema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.criteo.get_spark_schema" title="Permalink to this definition">¶</a></dt>
<dd><p>Get Spark schema from header.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>header</strong> (<em>list</em>) – Dataset header names.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Spark schema.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pyspark.sql.types.StructType</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.criteo.load_pandas_df">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.criteo.</span></span><span class="sig-name descname"><span class="pre">load_pandas_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'sample'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">local_cache_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['label',</span> <span class="pre">'int00',</span> <span class="pre">'int01',</span> <span class="pre">'int02',</span> <span class="pre">'int03',</span> <span class="pre">'int04',</span> <span class="pre">'int05',</span> <span class="pre">'int06',</span> <span class="pre">'int07',</span> <span class="pre">'int08',</span> <span class="pre">'int09',</span> <span class="pre">'int10',</span> <span class="pre">'int11',</span> <span class="pre">'int12',</span> <span class="pre">'cat00',</span> <span class="pre">'cat01',</span> <span class="pre">'cat02',</span> <span class="pre">'cat03',</span> <span class="pre">'cat04',</span> <span class="pre">'cat05',</span> <span class="pre">'cat06',</span> <span class="pre">'cat07',</span> <span class="pre">'cat08',</span> <span class="pre">'cat09',</span> <span class="pre">'cat10',</span> <span class="pre">'cat11',</span> <span class="pre">'cat12',</span> <span class="pre">'cat13',</span> <span class="pre">'cat14',</span> <span class="pre">'cat15',</span> <span class="pre">'cat16',</span> <span class="pre">'cat17',</span> <span class="pre">'cat18',</span> <span class="pre">'cat19',</span> <span class="pre">'cat20',</span> <span class="pre">'cat21',</span> <span class="pre">'cat22',</span> <span class="pre">'cat23',</span> <span class="pre">'cat24',</span> <span class="pre">'cat25']</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/criteo.html#load_pandas_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.criteo.load_pandas_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads the Criteo DAC dataset as <cite>pandas.DataFrame</cite>. This function download, untar, and load the dataset.</p>
<p>The dataset consists of a portion of Criteo’s traffic over a period
of 24 days. Each row corresponds to a display ad served by Criteo and the first
column indicates whether this ad has been clicked or not.</p>
<p>There are 13 features taking integer values (mostly count features) and 26
categorical features. The values of the categorical features have been hashed
onto 32 bits for anonymization purposes.</p>
<p>The schema is:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">label</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">integer</span> <span class="n">feature</span> <span class="mi">1</span><span class="o">&gt;</span> <span class="o">...</span> <span class="o">&lt;</span><span class="n">integer</span> <span class="n">feature</span> <span class="mi">13</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">categorical</span> <span class="n">feature</span> <span class="mi">1</span><span class="o">&gt;</span> <span class="o">...</span> <span class="o">&lt;</span><span class="n">categorical</span> <span class="n">feature</span> <span class="mi">26</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>More details (need to accept user terms to see the information):
<a class="reference external" href="http://labs.criteo.com/2013/12/download-terabyte-click-logs/">http://labs.criteo.com/2013/12/download-terabyte-click-logs/</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>size</strong> (<em>str</em>) – Dataset size. It can be “sample” or “full”.</p></li>
<li><p><strong>local_cache_path</strong> (<em>str</em>) – Path where to cache the tar.gz file locally</p></li>
<li><p><strong>header</strong> (<em>list</em>) – Dataset header names.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Criteo DAC sample dataset.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.criteo.load_spark_df">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.criteo.</span></span><span class="sig-name descname"><span class="pre">load_spark_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spark</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'sample'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['label',</span> <span class="pre">'int00',</span> <span class="pre">'int01',</span> <span class="pre">'int02',</span> <span class="pre">'int03',</span> <span class="pre">'int04',</span> <span class="pre">'int05',</span> <span class="pre">'int06',</span> <span class="pre">'int07',</span> <span class="pre">'int08',</span> <span class="pre">'int09',</span> <span class="pre">'int10',</span> <span class="pre">'int11',</span> <span class="pre">'int12',</span> <span class="pre">'cat00',</span> <span class="pre">'cat01',</span> <span class="pre">'cat02',</span> <span class="pre">'cat03',</span> <span class="pre">'cat04',</span> <span class="pre">'cat05',</span> <span class="pre">'cat06',</span> <span class="pre">'cat07',</span> <span class="pre">'cat08',</span> <span class="pre">'cat09',</span> <span class="pre">'cat10',</span> <span class="pre">'cat11',</span> <span class="pre">'cat12',</span> <span class="pre">'cat13',</span> <span class="pre">'cat14',</span> <span class="pre">'cat15',</span> <span class="pre">'cat16',</span> <span class="pre">'cat17',</span> <span class="pre">'cat18',</span> <span class="pre">'cat19',</span> <span class="pre">'cat20',</span> <span class="pre">'cat21',</span> <span class="pre">'cat22',</span> <span class="pre">'cat23',</span> <span class="pre">'cat24',</span> <span class="pre">'cat25']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">local_cache_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dbfs_datapath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'dbfs:/FileStore/dac'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dbutils</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/criteo.html#load_spark_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.criteo.load_spark_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads the Criteo DAC dataset as <cite>pySpark.DataFrame</cite>.</p>
<p>The dataset consists of a portion of Criteo’s traffic over a period
of 24 days. Each row corresponds to a display ad served by Criteo and the first
column is indicates whether this ad has been clicked or not.</p>
<p>There are 13 features taking integer values (mostly count features) and 26
categorical features. The values of the categorical features have been hashed
onto 32 bits for anonymization purposes.</p>
<p>The schema is:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">label</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">integer</span> <span class="n">feature</span> <span class="mi">1</span><span class="o">&gt;</span> <span class="o">...</span> <span class="o">&lt;</span><span class="n">integer</span> <span class="n">feature</span> <span class="mi">13</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">categorical</span> <span class="n">feature</span> <span class="mi">1</span><span class="o">&gt;</span> <span class="o">...</span> <span class="o">&lt;</span><span class="n">categorical</span> <span class="n">feature</span> <span class="mi">26</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>More details (need to accept user terms to see the information):
<a class="reference external" href="http://labs.criteo.com/2013/12/download-terabyte-click-logs/">http://labs.criteo.com/2013/12/download-terabyte-click-logs/</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>spark</strong> (<em>pySpark.SparkSession</em>) – Spark session.</p></li>
<li><p><strong>size</strong> (<em>str</em>) – Dataset size. It can be “sample” or “full”.</p></li>
<li><p><strong>local_cache_path</strong> (<em>str</em>) – Path where to cache the tar.gz file locally.</p></li>
<li><p><strong>header</strong> (<em>list</em>) – Dataset header names.</p></li>
<li><p><strong>dbfs_datapath</strong> (<em>str</em>) – Where to store the extracted files on Databricks.</p></li>
<li><p><strong>dbutils</strong> (<em>Databricks.dbutils</em>) – Databricks utility object.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Criteo DAC training dataset.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pyspark.sql.DataFrame</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="mind">
<h3>MIND<a class="headerlink" href="#mind" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://msnews.github.io/">MIcrosoft News Dataset (MIND)</a>, is a large-scale dataset for news recommendation research. It was collected from
anonymized behavior logs of Microsoft News website.</p>
<p>MIND contains about 160k English news articles and more than 15 million impression logs generated by 1 million users.
Every news article contains rich textual content including title, abstract, body, category and entities.
Each impression log contains the click events, non-clicked events and historical news click behaviors of this user before
this impression. To protect user privacy, each user was de-linked from the production system when securely hashed into an anonymized ID.</p>
<dl class="field-list simple">
<dt class="field-odd">Citation</dt>
<dd class="field-odd"><p>Fangzhao Wu, Ying Qiao, Jiun-Hung Chen, Chuhan Wu, Tao Qi, Jianxun Lian, Danyang Liu, Xing Xie, Jianfeng Gao, Winnie Wu
and Ming Zhou, “MIND: A Large-scale Dataset for News Recommendation”, ACL, 2020.</p>
</dd>
</dl>
<span class="target" id="module-recommenders.datasets.mind"></span><dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.mind.download_and_extract_glove">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.mind.</span></span><span class="sig-name descname"><span class="pre">download_and_extract_glove</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dest_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/mind.html#download_and_extract_glove"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.mind.download_and_extract_glove" title="Permalink to this definition">¶</a></dt>
<dd><p>Download and extract the Glove embedding</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dest_path</strong> (<em>str</em>) – Destination directory path for the downloaded file</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>File path where Glove was extracted.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.mind.download_mind">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.mind.</span></span><span class="sig-name descname"><span class="pre">download_mind</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'small'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/mind.html#download_mind"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.mind.download_mind" title="Permalink to this definition">¶</a></dt>
<dd><p>Download MIND dataset</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>size</strong> (<em>str</em>) – Dataset size. One of [“small”, “large”]</p></li>
<li><p><strong>dest_path</strong> (<em>str</em>) – Download path. If path is None, it will download the dataset on a temporal path</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Path to train and validation sets.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str, str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.mind.extract_mind">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.mind.</span></span><span class="sig-name descname"><span class="pre">extract_mind</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">train_zip</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_zip</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'train'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'valid'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clean_zip_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/mind.html#extract_mind"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.mind.extract_mind" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract MIND dataset</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>train_zip</strong> (<em>str</em>) – Path to train zip file</p></li>
<li><p><strong>valid_zip</strong> (<em>str</em>) – Path to valid zip file</p></li>
<li><p><strong>train_folder</strong> (<em>str</em>) – Destination forder for train set</p></li>
<li><p><strong>valid_folder</strong> (<em>str</em>) – Destination forder for validation set</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Train and validation folders</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str, str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.mind.generate_embeddings">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.mind.</span></span><span class="sig-name descname"><span class="pre">generate_embeddings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">news_words</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">news_entities</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_entities</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_entities</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_sentence</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">word_embedding_dim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/mind.html#generate_embeddings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.mind.generate_embeddings" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate embeddings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_path</strong> (<em>str</em>) – Data path.</p></li>
<li><p><strong>news_words</strong> (<em>dict</em>) – News word dictionary.</p></li>
<li><p><strong>news_entities</strong> (<em>dict</em>) – News entity dictionary.</p></li>
<li><p><strong>train_entities</strong> (<em>str</em>) – Train entity file.</p></li>
<li><p><strong>valid_entities</strong> (<em>str</em>) – Validation entity file.</p></li>
<li><p><strong>max_sentence</strong> (<em>int</em>) – Max sentence size.</p></li>
<li><p><strong>word_embedding_dim</strong> (<em>int</em>) – Word embedding dimension.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>File paths to news, word and entity embeddings.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str, str, str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.mind.get_train_input">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.mind.</span></span><span class="sig-name descname"><span class="pre">get_train_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npratio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/mind.html#get_train_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.mind.get_train_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate train file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<em>list</em>) – List of user session with user_id, clicks, positive and negative interactions.</p></li>
<li><p><strong>train_file_path</strong> (<em>str</em>) – Path to file.</p></li>
<li><p><strong>npration</strong> (<em>int</em>) – Ratio for negative sampling.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.mind.get_user_history">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.mind.</span></span><span class="sig-name descname"><span class="pre">get_user_history</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">train_history</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_history</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_history_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/mind.html#get_user_history"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.mind.get_user_history" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate user history file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>train_history</strong> (<em>list</em>) – Train history.</p></li>
<li><p><strong>valid_history</strong> (<em>list</em>) – Validation history</p></li>
<li><p><strong>user_history_path</strong> (<em>str</em>) – Path to file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.mind.get_valid_input">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.mind.</span></span><span class="sig-name descname"><span class="pre">get_valid_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_file_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/mind.html#get_valid_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.mind.get_valid_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate validation file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<em>list</em>) – List of user session with user_id, clicks, positive and negative interactions.</p></li>
<li><p><strong>valid_file_path</strong> (<em>str</em>) – Path to file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.mind.get_words_and_entities">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.mind.</span></span><span class="sig-name descname"><span class="pre">get_words_and_entities</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">train_news</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_news</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/mind.html#get_words_and_entities"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.mind.get_words_and_entities" title="Permalink to this definition">¶</a></dt>
<dd><p>Load words and entities</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>train_news</strong> (<em>str</em>) – News train file.</p></li>
<li><p><strong>valid_news</strong> (<em>str</em>) – News validation file.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Words and entities dictionaries.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict, dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.mind.load_glove_matrix">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.mind.</span></span><span class="sig-name descname"><span class="pre">load_glove_matrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path_emb</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">word_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">word_embedding_dim</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/mind.html#load_glove_matrix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.mind.load_glove_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Load pretrained embedding metrics of words in word_dict</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path_emb</strong> (<em>string</em>) – Folder path of downloaded glove file</p></li>
<li><p><strong>word_dict</strong> (<em>dict</em>) – word dictionary</p></li>
<li><p><strong>word_embedding_dim</strong> – dimention of word embedding vectors</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>pretrained word embedding metrics, words can be found in glove files</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray, list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.mind.read_clickhistory">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.mind.</span></span><span class="sig-name descname"><span class="pre">read_clickhistory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/mind.html#read_clickhistory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.mind.read_clickhistory" title="Permalink to this definition">¶</a></dt>
<dd><p>Read click history file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – Folder path</p></li>
<li><p><strong>filename</strong> (<em>str</em>) – Filename</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>A list of user session with user_id, clicks, positive and negative interactions.</p></li>
<li><p>A dictionary with user_id click history.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list, dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.mind.word_tokenize">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.mind.</span></span><span class="sig-name descname"><span class="pre">word_tokenize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sent</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/mind.html#word_tokenize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.mind.word_tokenize" title="Permalink to this definition">¶</a></dt>
<dd><p>Tokenize a sententence</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sent</strong> – the sentence need to be tokenized</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>words in the sentence</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="movielens">
<h3>MovieLens<a class="headerlink" href="#movielens" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference external" href="https://grouplens.org/datasets/movielens/">MovieLens datasets</a>, first released in 1998,
describe people’s expressed preferences
for movies. These preferences take the form of <cite>&lt;user, item, rating, timestamp&gt;</cite> tuples,
each the result of a person expressing a preference (a 0-5 star rating) for a movie
at a particular time.</p>
<p>It comes with several sizes:</p>
<ul class="simple">
<li><p>MovieLens 100k: 100,000 ratings from 1000 users on 1700 movies.</p></li>
<li><p>MovieLens 1M: 1 million ratings from 6000 users on 4000 movies.</p></li>
<li><p>MovieLens 10M: 10 million ratings from 72000 users on 10000 movies.</p></li>
<li><p>MovieLens 20M: 20 million ratings from 138000 users on 27000 movies</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Citation</dt>
<dd class="field-odd"><p>F. M. Harper and J. A. Konstan. “The MovieLens Datasets: History and Context”.
ACM Transactions on Interactive Intelligent Systems (TiiS) 5, 4, Article 19,
DOI=http://dx.doi.org/10.1145/2827872, 2015.</p>
</dd>
</dl>
<span class="target" id="module-recommenders.datasets.movielens"></span><dl class="py class">
<dt class="sig sig-object py" id="recommenders.datasets.movielens.MockMovielensSchema">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">recommenders.datasets.movielens.</span></span><span class="sig-name descname"><span class="pre">MockMovielensSchema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/movielens.html#MockMovielensSchema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.movielens.MockMovielensSchema" title="Permalink to this definition">¶</a></dt>
<dd><p>Mock dataset schema to generate fake data for testing purpose.
This schema is configured to mimic the Movielens dataset</p>
<p><a class="reference external" href="http://files.grouplens.org/datasets/movielens/ml-100k/">http://files.grouplens.org/datasets/movielens/ml-100k/</a></p>
<p>Dataset schema and generation is configured using pandera.
Please see <a class="reference external" href="https://pandera.readthedocs.io/en/latest/schema_models.html">https://pandera.readthedocs.io/en/latest/schema_models.html</a>
for more information.</p>
<dl class="py method">
<dt class="sig sig-object py" id="recommenders.datasets.movielens.MockMovielensSchema.get_df">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">get_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_first_n_cols</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_title_col</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_genre_col</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">pandas.core.frame.DataFrame</span></span></span><a class="reference internal" href="../_modules/recommenders/datasets/movielens.html#MockMovielensSchema.get_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.movielens.MockMovielensSchema.get_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Return fake movielens dataset as a Pandas Dataframe with specified rows.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>size</strong> (<em>int</em>) – number of rows to generate</p></li>
<li><p><strong>seed</strong> (<em>int</em><em>, </em><em>optional</em>) – seeding the pseudo-number generation. Defaults to 100.</p></li>
<li><p><strong>keep_first_n_cols</strong> (<em>int</em><em>, </em><em>optional</em>) – keep the first n default movielens columns.</p></li>
<li><p><strong>keep_title_col</strong> (<em>bool</em>) – remove the title column if False. Defaults to True.</p></li>
<li><p><strong>keep_genre_col</strong> (<em>bool</em>) – remove the genre column if False. Defaults to True.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a mock dataset</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="recommenders.datasets.movielens.MockMovielensSchema.get_spark_df">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">get_spark_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spark</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_title_col</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_genre_col</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tmp_path</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/movielens.html#MockMovielensSchema.get_spark_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.movielens.MockMovielensSchema.get_spark_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Return fake movielens dataset as a Spark Dataframe with specified rows</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>spark</strong> (<em>SparkSession</em>) – spark session to load the dataframe into</p></li>
<li><p><strong>size</strong> (<em>int</em>) – number of rows to generate</p></li>
<li><p><strong>seed</strong> (<em>int</em>) – seeding the pseudo-number generation. Defaults to 100.</p></li>
<li><p><strong>keep_title_col</strong> (<em>bool</em>) – remove the title column if False. Defaults to False.</p></li>
<li><p><strong>keep_genre_col</strong> (<em>bool</em>) – remove the genre column if False. Defaults to False.</p></li>
<li><p><strong>tmp_path</strong> (<em>str</em><em>, </em><em>optional</em>) – path to store files for serialization purpose
when transferring data from python to java.
If None, a temporal path is used instead</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a mock dataset</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pyspark.sql.DataFrame</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.movielens.download_movielens">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.movielens.</span></span><span class="sig-name descname"><span class="pre">download_movielens</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/movielens.html#download_movielens"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.movielens.download_movielens" title="Permalink to this definition">¶</a></dt>
<dd><p>Downloads MovieLens datafile.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>size</strong> (<em>str</em>) – Size of the data to load. One of (“100k”, “1m”, “10m”, “20m”).</p></li>
<li><p><strong>dest_path</strong> (<em>str</em>) – File path for the downloaded file</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.movielens.extract_movielens">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.movielens.</span></span><span class="sig-name descname"><span class="pre">extract_movielens</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rating_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">item_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zip_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/movielens.html#extract_movielens"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.movielens.extract_movielens" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract MovieLens rating and item datafiles from the MovieLens raw zip file.</p>
<p>To extract all files instead of just rating and item datafiles,
use ZipFile’s extractall(path) instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>size</strong> (<em>str</em>) – Size of the data to load. One of (“100k”, “1m”, “10m”, “20m”).</p></li>
<li><p><strong>rating_path</strong> (<em>str</em>) – Destination path for rating datafile</p></li>
<li><p><strong>item_path</strong> (<em>str</em>) – Destination path for item datafile</p></li>
<li><p><strong>zip_path</strong> (<em>str</em>) – zipfile path</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.movielens.load_item_df">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.movielens.</span></span><span class="sig-name descname"><span class="pre">load_item_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'100k'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">local_cache_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">movie_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'itemID'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">genres_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/movielens.html#load_item_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.movielens.load_item_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads Movie info.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>size</strong> (<em>str</em>) – Size of the data to load. One of (“100k”, “1m”, “10m”, “20m”).</p></li>
<li><p><strong>local_cache_path</strong> (<em>str</em>) – Path (directory or a zip file) to cache the downloaded zip file.
If None, all the intermediate files will be stored in a temporary directory and removed after use.</p></li>
<li><p><strong>movie_col</strong> (<em>str</em>) – Movie id column name.</p></li>
<li><p><strong>title_col</strong> (<em>str</em>) – Movie title column name. If None, the column will not be loaded.</p></li>
<li><p><strong>genres_col</strong> (<em>str</em>) – Genres column name. Genres are ‘|’ separated string.
If None, the column will not be loaded.</p></li>
<li><p><strong>year_col</strong> (<em>str</em>) – Movie release year column name. If None, the column will not be loaded.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Movie information data, such as title, genres, and release year.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.movielens.load_pandas_df">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.movielens.</span></span><span class="sig-name descname"><span class="pre">load_pandas_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'100k'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">local_cache_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">genres_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/movielens.html#load_pandas_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.movielens.load_pandas_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads the MovieLens dataset as pd.DataFrame.</p>
<p>Download the dataset from <a class="reference external" href="http://files.grouplens.org/datasets/movielens">http://files.grouplens.org/datasets/movielens</a>, unzip, and load.
To load movie information only, you can use load_item_df function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>size</strong> (<em>str</em>) – Size of the data to load. One of (“100k”, “1m”, “10m”, “20m”, “mock100”).</p></li>
<li><p><strong>header</strong> (<em>list</em><em> or </em><em>tuple</em><em> or </em><em>None</em>) – Rating dataset header.
If <cite>size</cite> is set to any of ‘MOCK_DATA_FORMAT’, this parameter is ignored and data is rendered using the ‘DEFAULT_HEADER’ instead.</p></li>
<li><p><strong>local_cache_path</strong> (<em>str</em>) – Path (directory or a zip file) to cache the downloaded zip file.
If None, all the intermediate files will be stored in a temporary directory and removed after use.
If <cite>size</cite> is set to any of ‘MOCK_DATA_FORMAT’, this parameter is ignored.</p></li>
<li><p><strong>title_col</strong> (<em>str</em>) – Movie title column name. If None, the column will not be loaded.</p></li>
<li><p><strong>genres_col</strong> (<em>str</em>) – Genres column name. Genres are ‘|’ separated string.
If None, the column will not be loaded.</p></li>
<li><p><strong>year_col</strong> (<em>str</em>) – Movie release year column name. If None, the column will not be loaded.
If <cite>size</cite> is set to any of ‘MOCK_DATA_FORMAT’, this parameter is ignored.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Movie rating dataset.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
<p><strong>Examples</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># To load just user-id, item-id, and ratings from MovieLens-1M dataset,</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">load_pandas_df</span><span class="p">(</span><span class="s1">&#39;1m&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;UserId&#39;</span><span class="p">,</span> <span class="s1">&#39;ItemId&#39;</span><span class="p">,</span> <span class="s1">&#39;Rating&#39;</span><span class="p">))</span>

<span class="c1"># To load rating&#39;s timestamp together,</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">load_pandas_df</span><span class="p">(</span><span class="s1">&#39;1m&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;UserId&#39;</span><span class="p">,</span> <span class="s1">&#39;ItemId&#39;</span><span class="p">,</span> <span class="s1">&#39;Rating&#39;</span><span class="p">,</span> <span class="s1">&#39;Timestamp&#39;</span><span class="p">))</span>

<span class="c1"># To load movie&#39;s title, genres, and released year info along with the ratings data,</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">load_pandas_df</span><span class="p">(</span><span class="s1">&#39;1m&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;UserId&#39;</span><span class="p">,</span> <span class="s1">&#39;ItemId&#39;</span><span class="p">,</span> <span class="s1">&#39;Rating&#39;</span><span class="p">,</span> <span class="s1">&#39;Timestamp&#39;</span><span class="p">),</span>
    <span class="n">title_col</span><span class="o">=</span><span class="s1">&#39;Title&#39;</span><span class="p">,</span>
    <span class="n">genres_col</span><span class="o">=</span><span class="s1">&#39;Genres&#39;</span><span class="p">,</span>
    <span class="n">year_col</span><span class="o">=</span><span class="s1">&#39;Year&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.movielens.load_spark_df">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.movielens.</span></span><span class="sig-name descname"><span class="pre">load_spark_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spark</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'100k'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">local_cache_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dbutils</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">genres_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/movielens.html#load_spark_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.movielens.load_spark_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads the MovieLens dataset as <cite>pyspark.sql.DataFrame</cite>.</p>
<p>Download the dataset from <a class="reference external" href="http://files.grouplens.org/datasets/movielens">http://files.grouplens.org/datasets/movielens</a>, unzip, and load as <cite>pyspark.sql.DataFrame</cite>.</p>
<p>To load movie information only, you can use <cite>load_item_df</cite> function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>spark</strong> (<em>pyspark.SparkSession</em>) – Spark session.</p></li>
<li><p><strong>size</strong> (<em>str</em>) – Size of the data to load. One of (“100k”, “1m”, “10m”, “20m”, “mock100”).</p></li>
<li><p><strong>header</strong> (<em>list</em><em> or </em><em>tuple</em>) – Rating dataset header.
If <cite>schema</cite> is provided or <cite>size</cite> is set to any of ‘MOCK_DATA_FORMAT’, this argument is ignored.</p></li>
<li><p><strong>schema</strong> (<em>pyspark.StructType</em>) – Dataset schema.
If <cite>size</cite> is set to any of ‘MOCK_DATA_FORMAT’, data is rendered in the ‘MockMovielensSchema’ instead.</p></li>
<li><p><strong>local_cache_path</strong> (<em>str</em>) – Path (directory or a zip file) to cache the downloaded zip file.
If None, all the intermediate files will be stored in a temporary directory and removed after use.</p></li>
<li><p><strong>dbutils</strong> (<em>Databricks.dbutils</em>) – Databricks utility object
If <cite>size</cite> is set to any of ‘MOCK_DATA_FORMAT’, this parameter is ignored.</p></li>
<li><p><strong>title_col</strong> (<em>str</em>) – Title column name. If None, the column will not be loaded.</p></li>
<li><p><strong>genres_col</strong> (<em>str</em>) – Genres column name. Genres are ‘|’ separated string.
If None, the column will not be loaded.</p></li>
<li><p><strong>year_col</strong> (<em>str</em>) – Movie release year column name. If None, the column will not be loaded.
If <cite>size</cite> is set to any of ‘MOCK_DATA_FORMAT’, this parameter is ignored.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Movie rating dataset.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pyspark.sql.DataFrame</p>
</dd>
</dl>
<p><strong>Examples</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># To load just user-id, item-id, and ratings from MovieLens-1M dataset:</span>
<span class="n">spark_df</span> <span class="o">=</span> <span class="n">load_spark_df</span><span class="p">(</span><span class="n">spark</span><span class="p">,</span> <span class="s1">&#39;1m&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;UserId&#39;</span><span class="p">,</span> <span class="s1">&#39;ItemId&#39;</span><span class="p">,</span> <span class="s1">&#39;Rating&#39;</span><span class="p">))</span>

<span class="c1"># The schema can be defined as well:</span>
<span class="n">schema</span> <span class="o">=</span> <span class="n">StructType</span><span class="p">([</span>
    <span class="n">StructField</span><span class="p">(</span><span class="n">DEFAULT_USER_COL</span><span class="p">,</span> <span class="n">IntegerType</span><span class="p">()),</span>
    <span class="n">StructField</span><span class="p">(</span><span class="n">DEFAULT_ITEM_COL</span><span class="p">,</span> <span class="n">IntegerType</span><span class="p">()),</span>
    <span class="n">StructField</span><span class="p">(</span><span class="n">DEFAULT_RATING_COL</span><span class="p">,</span> <span class="n">FloatType</span><span class="p">()),</span>
    <span class="n">StructField</span><span class="p">(</span><span class="n">DEFAULT_TIMESTAMP_COL</span><span class="p">,</span> <span class="n">LongType</span><span class="p">()),</span>
    <span class="p">])</span>
<span class="n">spark_df</span> <span class="o">=</span> <span class="n">load_spark_df</span><span class="p">(</span><span class="n">spark</span><span class="p">,</span> <span class="s1">&#39;1m&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;UserId&#39;</span><span class="p">,</span> <span class="s1">&#39;ItemId&#39;</span><span class="p">,</span> <span class="s1">&#39;Rating&#39;</span><span class="p">),</span> <span class="n">schema</span><span class="o">=</span><span class="n">schema</span><span class="p">)</span>

<span class="c1"># To load rating&#39;s timestamp together:</span>
<span class="n">spark_df</span> <span class="o">=</span> <span class="n">load_spark_df</span><span class="p">(</span><span class="n">spark</span><span class="p">,</span> <span class="s1">&#39;1m&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;UserId&#39;</span><span class="p">,</span> <span class="s1">&#39;ItemId&#39;</span><span class="p">,</span> <span class="s1">&#39;Rating&#39;</span><span class="p">,</span> <span class="s1">&#39;Timestamp&#39;</span><span class="p">))</span>

<span class="c1"># To load movie&#39;s title, genres, and released year info along with the ratings data:</span>
<span class="n">spark_df</span> <span class="o">=</span> <span class="n">load_spark_df</span><span class="p">(</span><span class="n">spark</span><span class="p">,</span> <span class="s1">&#39;1m&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;UserId&#39;</span><span class="p">,</span> <span class="s1">&#39;ItemId&#39;</span><span class="p">,</span> <span class="s1">&#39;Rating&#39;</span><span class="p">,</span> <span class="s1">&#39;Timestamp&#39;</span><span class="p">),</span>
    <span class="n">title_col</span><span class="o">=</span><span class="s1">&#39;Title&#39;</span><span class="p">,</span>
    <span class="n">genres_col</span><span class="o">=</span><span class="s1">&#39;Genres&#39;</span><span class="p">,</span>
    <span class="n">year_col</span><span class="o">=</span><span class="s1">&#39;Year&#39;</span>
<span class="p">)</span>

<span class="c1"># On DataBricks, pass the dbutils argument as follows:</span>
<span class="n">spark_df</span> <span class="o">=</span> <span class="n">load_spark_df</span><span class="p">(</span><span class="n">spark</span><span class="p">,</span> <span class="n">dbutils</span><span class="o">=</span><span class="n">dbutils</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>
<div class="section" id="module-recommenders.datasets.download_utils">
<span id="download-utilities"></span><h2>Download utilities<a class="headerlink" href="#module-recommenders.datasets.download_utils" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.download_utils.download_path">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.download_utils.</span></span><span class="sig-name descname"><span class="pre">download_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/download_utils.html#download_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.download_utils.download_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a path to download data. If <cite>path=None</cite>, then it yields a temporal path that is eventually deleted,
otherwise the real path of the input.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – Path to download data.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Real path where the data is stored.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">download_path</span><span class="p">()</span> <span class="k">as</span> <span class="n">path</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="o">...</span> <span class="n">maybe_download</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s2">&quot;http://example.com/file.zip&quot;</span><span class="p">,</span> <span class="n">work_directory</span><span class="o">=</span><span class="n">path</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.download_utils.maybe_download">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.download_utils.</span></span><span class="sig-name descname"><span class="pre">maybe_download</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">work_directory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expected_bytes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/download_utils.html#maybe_download"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.download_utils.maybe_download" title="Permalink to this definition">¶</a></dt>
<dd><p>Download a file if it is not already downloaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – File name.</p></li>
<li><p><strong>work_directory</strong> (<em>str</em>) – Working directory.</p></li>
<li><p><strong>url</strong> (<em>str</em>) – URL of the file to download.</p></li>
<li><p><strong>expected_bytes</strong> (<em>int</em>) – Expected file size in bytes.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>File path of the file downloaded.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.download_utils.unzip_file">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.download_utils.</span></span><span class="sig-name descname"><span class="pre">unzip_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">zip_src</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clean_zip_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/download_utils.html#unzip_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.download_utils.unzip_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Unzip a file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>zip_src</strong> (<em>str</em>) – Zip file.</p></li>
<li><p><strong>dst_dir</strong> (<em>str</em>) – Destination folder.</p></li>
<li><p><strong>clean_zip_file</strong> (<em>bool</em>) – Whether or not to clean the zip file.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-recommenders.datasets.cosmos_cli">
<span id="cosmos-cli-utilities"></span><h2>Cosmos CLI utilities<a class="headerlink" href="#module-recommenders.datasets.cosmos_cli" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.cosmos_cli.find_collection">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.cosmos_cli.</span></span><span class="sig-name descname"><span class="pre">find_collection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dbid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/cosmos_cli.html#find_collection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.cosmos_cli.find_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Find whether or not a CosmosDB collection exists.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>client</strong> (<em>object</em>) – A pydocumentdb client object.</p></li>
<li><p><strong>dbid</strong> (<em>str</em>) – Database ID.</p></li>
<li><p><strong>id</strong> (<em>str</em>) – Collection ID.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the collection exists, False otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.cosmos_cli.find_database">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.cosmos_cli.</span></span><span class="sig-name descname"><span class="pre">find_database</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/cosmos_cli.html#find_database"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.cosmos_cli.find_database" title="Permalink to this definition">¶</a></dt>
<dd><p>Find whether or not a CosmosDB database exists.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>client</strong> (<em>object</em>) – A pydocumentdb client object.</p></li>
<li><p><strong>id</strong> (<em>str</em>) – Database ID.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the database exists, False otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.cosmos_cli.read_collection">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.cosmos_cli.</span></span><span class="sig-name descname"><span class="pre">read_collection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dbid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/cosmos_cli.html#read_collection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.cosmos_cli.read_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a CosmosDB collection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>client</strong> (<em>object</em>) – A pydocumentdb client object.</p></li>
<li><p><strong>dbid</strong> (<em>str</em>) – Database ID.</p></li>
<li><p><strong>id</strong> (<em>str</em>) – Collection ID.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A collection.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>object</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.cosmos_cli.read_database">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.cosmos_cli.</span></span><span class="sig-name descname"><span class="pre">read_database</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/cosmos_cli.html#read_database"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.cosmos_cli.read_database" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a CosmosDB database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>client</strong> (<em>object</em>) – A pydocumentdb client object.</p></li>
<li><p><strong>id</strong> (<em>str</em>) – Database ID.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A database.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>object</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-recommenders.datasets.pandas_df_utils">
<span id="pandas-dataframe-utilities"></span><h2>Pandas dataframe utilities<a class="headerlink" href="#module-recommenders.datasets.pandas_df_utils" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="recommenders.datasets.pandas_df_utils.LibffmConverter">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">recommenders.datasets.pandas_df_utils.</span></span><span class="sig-name descname"><span class="pre">LibffmConverter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/pandas_df_utils.html#LibffmConverter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.pandas_df_utils.LibffmConverter" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts an input dataframe to another dataframe in libffm format. A text file of the converted
Dataframe is optionally generated.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The input dataframe is expected to represent the feature data in the following schema:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">|</span><span class="n">field</span><span class="o">-</span><span class="mi">1</span><span class="o">|</span><span class="n">field</span><span class="o">-</span><span class="mi">2</span><span class="o">|...|</span><span class="n">field</span><span class="o">-</span><span class="n">n</span><span class="o">|</span><span class="n">rating</span><span class="o">|</span>
<span class="o">|</span><span class="n">feature</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="mi">1</span><span class="o">|</span><span class="n">feature</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="mi">1</span><span class="o">|...|</span><span class="n">feature</span><span class="o">-</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="o">|</span><span class="mi">1</span><span class="o">|</span>
<span class="o">|</span><span class="n">feature</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="mi">2</span><span class="o">|</span><span class="n">feature</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="mi">2</span><span class="o">|...|</span><span class="n">feature</span><span class="o">-</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="o">|</span><span class="mi">0</span><span class="o">|</span>
<span class="o">...</span>
<span class="o">|</span><span class="n">feature</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="n">i</span><span class="o">|</span><span class="n">feature</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="n">j</span><span class="o">|...|</span><span class="n">feature</span><span class="o">-</span><span class="n">n</span><span class="o">-</span><span class="n">k</span><span class="o">|</span><span class="mi">0</span><span class="o">|</span>
</pre></div>
</div>
<p>Where
1. each <cite>field-*</cite> is the column name of the dataframe (column of label/rating is excluded), and
2. <cite>feature-*-*</cite> can be either a string or a numerical value, representing the categorical variable or
actual numerical variable of the feature value in the field, respectively.
3. If there are ordinal variables represented in int types, users should make sure these columns
are properly converted to string type.</p>
<p>The above data will be converted to the libffm format by following the convention as explained in
<a class="reference external" href="https://www.csie.ntu.edu.tw/~r01922136/slides/ffm.pdf">this paper</a>.</p>
<p>i.e. <cite>&lt;field_index&gt;:&lt;field_feature_index&gt;:1</cite> or <cite>&lt;field_index&gt;:&lt;field_index&gt;:&lt;field_feature_value&gt;</cite>, depending on
the data type of the features in the original dataframe.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filepath</strong> (<em>str</em>) – path to save the converted data.</p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="recommenders.datasets.pandas_df_utils.LibffmConverter.field_count">
<span class="sig-name descname"><span class="pre">field_count</span></span><a class="headerlink" href="#recommenders.datasets.pandas_df_utils.LibffmConverter.field_count" title="Permalink to this definition">¶</a></dt>
<dd><p>count of field in the libffm format data</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="recommenders.datasets.pandas_df_utils.LibffmConverter.feature_count">
<span class="sig-name descname"><span class="pre">feature_count</span></span><a class="headerlink" href="#recommenders.datasets.pandas_df_utils.LibffmConverter.feature_count" title="Permalink to this definition">¶</a></dt>
<dd><p>count of feature in the libffm format data</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="recommenders.datasets.pandas_df_utils.LibffmConverter.filepath">
<span class="sig-name descname"><span class="pre">filepath</span></span><a class="headerlink" href="#recommenders.datasets.pandas_df_utils.LibffmConverter.filepath" title="Permalink to this definition">¶</a></dt>
<dd><p>file path where the output is stored - it can be None or a string</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str or None</p>
</dd>
</dl>
</dd></dl>

<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df_feature</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
<span class="go">        &#39;rating&#39;: [1, 0, 0, 1, 1],</span>
<span class="go">        &#39;field1&#39;: [&#39;xxx1&#39;, &#39;xxx2&#39;, &#39;xxx4&#39;, &#39;xxx4&#39;, &#39;xxx4&#39;],</span>
<span class="go">        &#39;field2&#39;: [3, 4, 5, 6, 7],</span>
<span class="go">        &#39;field3&#39;: [1.0, 2.0, 3.0, 4.0, 5.0],</span>
<span class="go">        &#39;field4&#39;: [&#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;5&#39;]</span>
<span class="go">    })</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">converter</span> <span class="o">=</span> <span class="n">LibffmConveter</span><span class="p">()</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df_feature</span><span class="p">,</span> <span class="n">col_rating</span><span class="o">=</span><span class="s1">&#39;rating&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df_out</span> <span class="o">=</span> <span class="n">converter</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">df_feature</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df_out</span>
<span class="go">    rating field1 field2   field3 field4</span>
<span class="go">0       1  1:1:1  2:4:3  3:5:1.0  4:4:1</span>
<span class="go">1       0  1:2:1  2:4:4  3:5:2.0  4:5:1</span>
<span class="go">2       0  1:3:1  2:4:5  3:5:3.0  4:6:1</span>
<span class="go">3       1  1:3:1  2:4:6  3:5:4.0  4:7:1</span>
<span class="go">4       1  1:3:1  2:4:7  3:5:5.0  4:8:1</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="recommenders.datasets.pandas_df_utils.LibffmConverter.fit">
<span class="sig-name descname"><span class="pre">fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_rating</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rating'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/pandas_df_utils.html#LibffmConverter.fit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.pandas_df_utils.LibffmConverter.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit the dataframe for libffm format.
This method does nothing but check the validity of the input columns</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – input Pandas dataframe.</p></li>
<li><p><strong>col_rating</strong> (<em>str</em>) – rating of the data.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the instance of the converter</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="recommenders.datasets.pandas_df_utils.LibffmConverter.fit_transform">
<span class="sig-name descname"><span class="pre">fit_transform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_rating</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rating'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/pandas_df_utils.html#LibffmConverter.fit_transform"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.pandas_df_utils.LibffmConverter.fit_transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Do fit and transform in a row</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – input Pandas dataframe.</p></li>
<li><p><strong>col_rating</strong> (<em>str</em>) – rating of the data.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Output libffm format dataframe.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="recommenders.datasets.pandas_df_utils.LibffmConverter.get_params">
<span class="sig-name descname"><span class="pre">get_params</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/pandas_df_utils.html#LibffmConverter.get_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.pandas_df_utils.LibffmConverter.get_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Get parameters (attributes) of the libffm converter</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A dictionary that contains parameters field count, feature count, and file path.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="recommenders.datasets.pandas_df_utils.LibffmConverter.transform">
<span class="sig-name descname"><span class="pre">transform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/pandas_df_utils.html#LibffmConverter.transform"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.pandas_df_utils.LibffmConverter.transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Tranform an input dataset with the same schema (column names and dtypes) to libffm format
by using the fitted converter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>df</strong> (<em>pandas.DataFrame</em>) – input Pandas dataframe.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Output libffm format dataframe.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="recommenders.datasets.pandas_df_utils.PandasHash">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">recommenders.datasets.pandas_df_utils.</span></span><span class="sig-name descname"><span class="pre">PandasHash</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pandas_object</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/pandas_df_utils.html#PandasHash"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.pandas_df_utils.PandasHash" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper class to allow pandas objects (DataFrames or Series) to be hashable</p>
<p>Initialize class</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pandas_object</strong> (<em>pandas.DataFrame</em><em>|</em><em>pandas.Series</em>) – pandas object</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.pandas_df_utils.filter_by">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.pandas_df_utils.</span></span><span class="sig-name descname"><span class="pre">filter_by</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_by_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_by_cols</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/pandas_df_utils.html#filter_by"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.pandas_df_utils.filter_by" title="Permalink to this definition">¶</a></dt>
<dd><p>From the input DataFrame <cite>df</cite>, remove the records whose target column <cite>filter_by_cols</cite> values are
exist in the filter-by DataFrame <cite>filter_by_df</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Source dataframe.</p></li>
<li><p><strong>filter_by_df</strong> (<em>pandas.DataFrame</em>) – Filter dataframe.</p></li>
<li><p><strong>filter_by_cols</strong> (<em>iterable of str</em>) – Filter columns.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dataframe filtered by <cite>filter_by_df</cite> on <cite>filter_by_cols</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.pandas_df_utils.has_columns">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.pandas_df_utils.</span></span><span class="sig-name descname"><span class="pre">has_columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/pandas_df_utils.html#has_columns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.pandas_df_utils.has_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if DataFrame has necessary columns</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – DataFrame</p></li>
<li><p><strong>columns</strong> (<em>list</em><em>(</em><em>str</em>) – columns to check for</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if DataFrame has specified columns.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.pandas_df_utils.has_same_base_dtype">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.pandas_df_utils.</span></span><span class="sig-name descname"><span class="pre">has_same_base_dtype</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df_2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/pandas_df_utils.html#has_same_base_dtype"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.pandas_df_utils.has_same_base_dtype" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if specified columns have the same base dtypes across both DataFrames</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df_1</strong> (<em>pandas.DataFrame</em>) – first DataFrame</p></li>
<li><p><strong>df_2</strong> (<em>pandas.DataFrame</em>) – second DataFrame</p></li>
<li><p><strong>columns</strong> (<em>list</em><em>(</em><em>str</em><em>)</em>) – columns to check, None checks all columns</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if DataFrames columns have the same base dtypes.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.pandas_df_utils.lru_cache_df">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.pandas_df_utils.</span></span><span class="sig-name descname"><span class="pre">lru_cache_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">maxsize</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">typed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/pandas_df_utils.html#lru_cache_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.pandas_df_utils.lru_cache_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Least-recently-used cache decorator for pandas Dataframes.</p>
<p>Decorator to wrap a function with a memoizing callable that saves up to the maxsize most recent calls. It can
save time when an expensive or I/O bound function is periodically called with the same arguments.</p>
<p>Inspired in the <a class="reference external" href="https://docs.python.org/3/library/functools.html#functools.lru_cache">lru_cache function</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>maxsize</strong> (<em>int</em><em>|</em><em>None</em>) – max size of cache, if set to None cache is boundless</p></li>
<li><p><strong>typed</strong> (<em>bool</em>) – arguments of different types are cached separately</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.pandas_df_utils.negative_feedback_sampler">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.pandas_df_utils.</span></span><span class="sig-name descname"><span class="pre">negative_feedback_sampler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_user</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'userID'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_item</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'itemID'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'label'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_feedback</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'feedback'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ratio_neg_per_user</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pos_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">neg_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">42</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/pandas_df_utils.html#negative_feedback_sampler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.pandas_df_utils.negative_feedback_sampler" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility function to sample negative feedback from user-item interaction dataset.
This negative sampling function will take the user-item interaction data to create
binarized feedback, i.e., 1 and 0 indicate positive and negative feedback,
respectively.</p>
<p>Negative sampling is used in the literature frequently to generate negative samples
from a user-item interaction data.</p>
<p>See for example the <a class="reference external" href="https://www.comp.nus.edu.sg/~xiangnan/papers/ncf.pdf">neural collaborative filtering paper</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – input data that contains user-item tuples.</p></li>
<li><p><strong>col_user</strong> (<em>str</em>) – user id column name.</p></li>
<li><p><strong>col_item</strong> (<em>str</em>) – item id column name.</p></li>
<li><p><strong>col_label</strong> (<em>str</em>) – label column name in df.</p></li>
<li><p><strong>col_feedback</strong> (<em>str</em>) – feedback column name in the returned data frame; it is used for the generated column
of positive and negative feedback.</p></li>
<li><p><strong>ratio_neg_per_user</strong> (<em>int</em>) – ratio of negative feedback w.r.t to the number of positive feedback for each user.
If the samples exceed the number of total possible negative feedback samples, it will be reduced to the
number of all the possible samples.</p></li>
<li><p><strong>pos_value</strong> (<em>float</em>) – value of positive feedback.</p></li>
<li><p><strong>neg_value</strong> (<em>float</em>) – value of negative feedback.</p></li>
<li><p><strong>inplace</strong> (<em>bool</em>) – </p></li>
<li><p><strong>seed</strong> (<em>int</em>) – seed for the random state of the sampling function.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Data with negative feedback.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
<span class="go">    &#39;userID&#39;: [1, 2, 3],</span>
<span class="go">    &#39;itemID&#39;: [1, 2, 3],</span>
<span class="go">    &#39;rating&#39;: [5, 5, 5]</span>
<span class="go">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df_neg_sampled</span> <span class="o">=</span> <span class="n">negative_feedback_sampler</span><span class="p">(</span>
<span class="go">    df, col_user=&#39;userID&#39;, col_item=&#39;itemID&#39;, ratio_neg_per_user=1</span>
<span class="go">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df_neg_sampled</span>
<span class="go">userID  itemID  feedback</span>
<span class="go">1   1   1</span>
<span class="go">1   2   0</span>
<span class="go">2   2   1</span>
<span class="go">2   1   0</span>
<span class="go">3   3   1</span>
<span class="go">3   1   0</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.pandas_df_utils.user_item_pairs">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.pandas_df_utils.</span></span><span class="sig-name descname"><span class="pre">user_item_pairs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">item_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'userID'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">item_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'itemID'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_item_filter_df</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shuffle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/pandas_df_utils.html#user_item_pairs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.pandas_df_utils.user_item_pairs" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all pairs of users and items data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>user_df</strong> (<em>pandas.DataFrame</em>) – User data containing unique user ids and maybe their features.</p></li>
<li><p><strong>item_df</strong> (<em>pandas.DataFrame</em>) – Item data containing unique item ids and maybe their features.</p></li>
<li><p><strong>user_col</strong> (<em>str</em>) – User id column name.</p></li>
<li><p><strong>item_col</strong> (<em>str</em>) – Item id column name.</p></li>
<li><p><strong>user_item_filter_df</strong> (<em>pd.DataFrame</em>) – User-item pairs to be used as a filter.</p></li>
<li><p><strong>shuffle</strong> (<em>bool</em>) – If True, shuffles the result.</p></li>
<li><p><strong>seed</strong> (<em>int</em>) – Random seed for shuffle</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>All pairs of user-item from user_df and item_df, excepting the pairs in user_item_filter_df.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-recommenders.datasets.python_splitters">
<span id="splitter-utilities"></span><h2>Splitter utilities<a class="headerlink" href="#module-recommenders.datasets.python_splitters" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.python_splitters.numpy_stratified_split">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.python_splitters.</span></span><span class="sig-name descname"><span class="pre">numpy_stratified_split</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ratio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.75</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">42</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/python_splitters.html#numpy_stratified_split"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.python_splitters.numpy_stratified_split" title="Permalink to this definition">¶</a></dt>
<dd><p>Split the user/item affinity matrix (sparse matrix) into train and test set matrices while maintaining
local (i.e. per user) ratios.</p>
<p>Main points :</p>
<p>1. In a typical recommender problem, different users rate a different number of items,
and therefore the user/affinity matrix has a sparse structure with variable number
of zeroes (unrated items) per row (user). Cutting a total amount of ratings will
result in a non-homogeneous distribution between train and test set, i.e. some test
users may have many ratings while other very little if none.</p>
<p>2. In an unsupervised learning problem, no explicit answer is given. For this reason
the split needs to be implemented in a different way then in supervised learningself.
In the latter, one typically split the dataset by rows (by examples), ending up with
the same number of features but different number of examples in the train/test setself.
This scheme does not work in the unsupervised case, as part of the rated items needs to
be used as a test set for fixed number of users.</p>
<p>Solution:</p>
<p>1. Instead of cutting a total percentage, for each user we cut a relative ratio of the rated
items. For example, if user1 has rated 4 items and user2 10, cutting 25% will correspond to
1 and 2.6 ratings in the test set, approximated as 1 and 3 according to the round() function.
In this way, the 0.75 ratio is satisfied both locally and globally, preserving the original
distribution of ratings across the train and test set.</p>
<p>2. It is easy (and fast) to satisfy this requirements by creating the test via element subtraction
from the original dataset X. We first create two copies of X; for each user we select a random
sample of local size ratio (point 1) and erase the remaining ratings, obtaining in this way the
train set matrix Xtst. The train set matrix is obtained in the opposite way.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> (<em>numpy.ndarray</em><em>, </em><em>int</em>) – a sparse matrix to be split</p></li>
<li><p><strong>ratio</strong> (<em>float</em>) – fraction of the entire dataset to constitute the train set</p></li>
<li><p><strong>seed</strong> (<em>int</em>) – random seed</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>Xtr: The train set user/item affinity matrix.</p></li>
<li><p>Xtst: The test set user/item affinity matrix.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray, numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.python_splitters.python_chrono_split">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.python_splitters.</span></span><span class="sig-name descname"><span class="pre">python_chrono_split</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ratio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.75</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_rating</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_by</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'user'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_user</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'userID'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_item</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'itemID'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_timestamp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'timestamp'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/python_splitters.html#python_chrono_split"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.python_splitters.python_chrono_split" title="Permalink to this definition">¶</a></dt>
<dd><p>Pandas chronological splitter.</p>
<p>This function splits data in a chronological manner. That is, for each user / item, the
split function takes proportions of ratings which is specified by the split ratio(s).
The split is stratified.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>pandas.DataFrame</em>) – Pandas DataFrame to be split.</p></li>
<li><p><strong>ratio</strong> (<em>float</em><em> or </em><em>list</em>) – Ratio for splitting data. If it is a single float number
it splits data into two halves and the ratio argument indicates the ratio of
training data set; if it is a list of float numbers, the splitter splits
data into several portions corresponding to the split ratios. If a list is
provided and the ratios are not summed to 1, they will be normalized.</p></li>
<li><p><strong>seed</strong> (<em>int</em>) – Seed.</p></li>
<li><p><strong>min_rating</strong> (<em>int</em>) – minimum number of ratings for user or item.</p></li>
<li><p><strong>filter_by</strong> (<em>str</em>) – either “user” or “item”, depending on which of the two is to
filter with min_rating.</p></li>
<li><p><strong>col_user</strong> (<em>str</em>) – column name of user IDs.</p></li>
<li><p><strong>col_item</strong> (<em>str</em>) – column name of item IDs.</p></li>
<li><p><strong>col_timestamp</strong> (<em>str</em>) – column name of timestamps.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Splits of the input data as pandas.DataFrame.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.python_splitters.python_random_split">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.python_splitters.</span></span><span class="sig-name descname"><span class="pre">python_random_split</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ratio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.75</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">42</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/python_splitters.html#python_random_split"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.python_splitters.python_random_split" title="Permalink to this definition">¶</a></dt>
<dd><p>Pandas random splitter.</p>
<p>The splitter randomly splits the input data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>pandas.DataFrame</em>) – Pandas DataFrame to be split.</p></li>
<li><p><strong>ratio</strong> (<em>float</em><em> or </em><em>list</em>) – Ratio for splitting data. If it is a single float number
it splits data into two halves and the ratio argument indicates the ratio
of training data set; if it is a list of float numbers, the splitter splits
data into several portions corresponding to the split ratios. If a list is
provided and the ratios are not summed to 1, they will be normalized.</p></li>
<li><p><strong>seed</strong> (<em>int</em>) – Seed.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Splits of the input data as pandas.DataFrame.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.python_splitters.python_stratified_split">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.python_splitters.</span></span><span class="sig-name descname"><span class="pre">python_stratified_split</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ratio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.75</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_rating</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_by</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'user'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_user</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'userID'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_item</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'itemID'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">42</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/python_splitters.html#python_stratified_split"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.python_splitters.python_stratified_split" title="Permalink to this definition">¶</a></dt>
<dd><p>Pandas stratified splitter.</p>
<p>For each user / item, the split function takes proportions of ratings which is
specified by the split ratio(s). The split is stratified.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>pandas.DataFrame</em>) – Pandas DataFrame to be split.</p></li>
<li><p><strong>ratio</strong> (<em>float</em><em> or </em><em>list</em>) – Ratio for splitting data. If it is a single float number
it splits data into two halves and the ratio argument indicates the ratio of
training data set; if it is a list of float numbers, the splitter splits
data into several portions corresponding to the split ratios. If a list is
provided and the ratios are not summed to 1, they will be normalized.</p></li>
<li><p><strong>seed</strong> (<em>int</em>) – Seed.</p></li>
<li><p><strong>min_rating</strong> (<em>int</em>) – minimum number of ratings for user or item.</p></li>
<li><p><strong>filter_by</strong> (<em>str</em>) – either “user” or “item”, depending on which of the two is to
filter with min_rating.</p></li>
<li><p><strong>col_user</strong> (<em>str</em>) – column name of user IDs.</p></li>
<li><p><strong>col_item</strong> (<em>str</em>) – column name of item IDs.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Splits of the input data as pandas.DataFrame.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-recommenders.datasets.spark_splitters"></span><dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.spark_splitters.spark_chrono_split">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.spark_splitters.</span></span><span class="sig-name descname"><span class="pre">spark_chrono_split</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ratio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.75</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_rating</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_by</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'user'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_user</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'userID'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_item</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'itemID'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_timestamp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'timestamp'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_partition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/spark_splitters.html#spark_chrono_split"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.spark_splitters.spark_chrono_split" title="Permalink to this definition">¶</a></dt>
<dd><p>Spark chronological splitter.</p>
<p>This function splits data in a chronological manner. That is, for each user / item, the
split function takes proportions of ratings which is specified by the split ratio(s).
The split is stratified.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>pyspark.sql.DataFrame</em>) – Spark DataFrame to be split.</p></li>
<li><p><strong>ratio</strong> (<em>float</em><em> or </em><em>list</em>) – Ratio for splitting data. If it is a single float number
it splits data into two sets and the ratio argument indicates the ratio of
training data set; if it is a list of float numbers, the splitter splits
data into several portions corresponding to the split ratios. If a list is
provided and the ratios are not summed to 1, they will be normalized.</p></li>
<li><p><strong>seed</strong> (<em>int</em>) – Seed.</p></li>
<li><p><strong>min_rating</strong> (<em>int</em>) – minimum number of ratings for user or item.</p></li>
<li><p><strong>filter_by</strong> (<em>str</em>) – either “user” or “item”, depending on which of the two is to filter
with min_rating.</p></li>
<li><p><strong>col_user</strong> (<em>str</em>) – column name of user IDs.</p></li>
<li><p><strong>col_item</strong> (<em>str</em>) – column name of item IDs.</p></li>
<li><p><strong>col_timestamp</strong> (<em>str</em>) – column name of timestamps.</p></li>
<li><p><strong>no_partition</strong> (<em>bool</em>) – set to enable more accurate and less efficient splitting.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Splits of the input data as pyspark.sql.DataFrame.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.spark_splitters.spark_random_split">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.spark_splitters.</span></span><span class="sig-name descname"><span class="pre">spark_random_split</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ratio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.75</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">42</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/spark_splitters.html#spark_random_split"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.spark_splitters.spark_random_split" title="Permalink to this definition">¶</a></dt>
<dd><p>Spark random splitter.</p>
<p>Randomly split the data into several splits.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>pyspark.sql.DataFrame</em>) – Spark DataFrame to be split.</p></li>
<li><p><strong>ratio</strong> (<em>float</em><em> or </em><em>list</em>) – Ratio for splitting data. If it is a single float number
it splits data into two halves and the ratio argument indicates the ratio of
training data set; if it is a list of float numbers, the splitter splits
data into several portions corresponding to the split ratios. If a list
is provided and the ratios are not summed to 1, they will be normalized.</p></li>
<li><p><strong>seed</strong> (<em>int</em>) – Seed.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Splits of the input data as pyspark.sql.DataFrame.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.spark_splitters.spark_stratified_split">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.spark_splitters.</span></span><span class="sig-name descname"><span class="pre">spark_stratified_split</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ratio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.75</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_rating</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_by</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'user'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_user</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'userID'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_item</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'itemID'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_rating</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rating'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">42</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/spark_splitters.html#spark_stratified_split"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.spark_splitters.spark_stratified_split" title="Permalink to this definition">¶</a></dt>
<dd><p>Spark stratified splitter.</p>
<p>For each user / item, the split function takes proportions of ratings which is
specified by the split ratio(s). The split is stratified.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>pyspark.sql.DataFrame</em>) – Spark DataFrame to be split.</p></li>
<li><p><strong>ratio</strong> (<em>float</em><em> or </em><em>list</em>) – Ratio for splitting data. If it is a single float number
it splits data into two halves and the ratio argument indicates the ratio of
training data set; if it is a list of float numbers, the splitter splits
data into several portions corresponding to the split ratios. If a list is
provided and the ratios are not summed to 1, they will be normalized.
Earlier indexed splits will have earlier times
(e.g the latest time per user or item in split[0] &lt;= the earliest time per user or item in split[1])</p></li>
<li><p><strong>seed</strong> (<em>int</em>) – Seed.</p></li>
<li><p><strong>min_rating</strong> (<em>int</em>) – minimum number of ratings for user or item.</p></li>
<li><p><strong>filter_by</strong> (<em>str</em>) – either “user” or “item”, depending on which of the two is to filter
with min_rating.</p></li>
<li><p><strong>col_user</strong> (<em>str</em>) – column name of user IDs.</p></li>
<li><p><strong>col_item</strong> (<em>str</em>) – column name of item IDs.</p></li>
<li><p><strong>col_rating</strong> (<em>str</em>) – column name of ratings.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Splits of the input data as pyspark.sql.DataFrame.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.spark_splitters.spark_timestamp_split">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.spark_splitters.</span></span><span class="sig-name descname"><span class="pre">spark_timestamp_split</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ratio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.75</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_user</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'userID'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_item</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'itemID'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_timestamp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'timestamp'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/spark_splitters.html#spark_timestamp_split"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.spark_splitters.spark_timestamp_split" title="Permalink to this definition">¶</a></dt>
<dd><p>Spark timestamp based splitter.</p>
<p>The splitter splits the data into sets by timestamps without stratification on either user or item.
The ratios are applied on the timestamp column which is divided accordingly into several partitions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>pyspark.sql.DataFrame</em>) – Spark DataFrame to be split.</p></li>
<li><p><strong>ratio</strong> (<em>float</em><em> or </em><em>list</em>) – Ratio for splitting data. If it is a single float number
it splits data into two sets and the ratio argument indicates the ratio of
training data set; if it is a list of float numbers, the splitter splits
data into several portions corresponding to the split ratios. If a list is
provided and the ratios are not summed to 1, they will be normalized.
Earlier indexed splits will have earlier times
(e.g the latest time in split[0] &lt;= the earliest time in split[1])</p></li>
<li><p><strong>col_user</strong> (<em>str</em>) – column name of user IDs.</p></li>
<li><p><strong>col_item</strong> (<em>str</em>) – column name of item IDs.</p></li>
<li><p><strong>col_timestamp</strong> (<em>str</em>) – column name of timestamps. Float number represented in</p></li>
<li><p><strong>Epoch.</strong> (<em>seconds since</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Splits of the input data as pyspark.sql.DataFrame.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-recommenders.datasets.split_utils"></span><dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.split_utils.min_rating_filter_pandas">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.split_utils.</span></span><span class="sig-name descname"><span class="pre">min_rating_filter_pandas</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_rating</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_by</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'user'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_user</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'userID'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_item</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'itemID'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/split_utils.html#min_rating_filter_pandas"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.split_utils.min_rating_filter_pandas" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter rating DataFrame for each user with minimum rating.</p>
<p>Filter rating data frame with minimum number of ratings for user/item is usually useful to
generate a new data frame with warm user/item. The warmth is defined by min_rating argument. For
example, a user is called warm if he has rated at least 4 items.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>pandas.DataFrame</em>) – DataFrame of user-item tuples. Columns of user and item
should be present in the DataFrame while other columns like rating,
timestamp, etc. can be optional.</p></li>
<li><p><strong>min_rating</strong> (<em>int</em>) – minimum number of ratings for user or item.</p></li>
<li><p><strong>filter_by</strong> (<em>str</em>) – either “user” or “item”, depending on which of the two is to
filter with min_rating.</p></li>
<li><p><strong>col_user</strong> (<em>str</em>) – column name of user ID.</p></li>
<li><p><strong>col_item</strong> (<em>str</em>) – column name of item ID.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DataFrame with at least columns of user and item that has been filtered by the given specifications.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.split_utils.min_rating_filter_spark">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.split_utils.</span></span><span class="sig-name descname"><span class="pre">min_rating_filter_spark</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_rating</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_by</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'user'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_user</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'userID'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_item</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'itemID'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/split_utils.html#min_rating_filter_spark"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.split_utils.min_rating_filter_spark" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter rating DataFrame for each user with minimum rating.</p>
<p>Filter rating data frame with minimum number of ratings for user/item is usually useful to
generate a new data frame with warm user/item. The warmth is defined by min_rating argument. For
example, a user is called warm if he has rated at least 4 items.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>pyspark.sql.DataFrame</em>) – DataFrame of user-item tuples. Columns of user and item
should be present in the DataFrame while other columns like rating,
timestamp, etc. can be optional.</p></li>
<li><p><strong>min_rating</strong> (<em>int</em>) – minimum number of ratings for user or item.</p></li>
<li><p><strong>filter_by</strong> (<em>str</em>) – either “user” or “item”, depending on which of the two is to
filter with min_rating.</p></li>
<li><p><strong>col_user</strong> (<em>str</em>) – column name of user ID.</p></li>
<li><p><strong>col_item</strong> (<em>str</em>) – column name of item ID.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DataFrame with at least columns of user and item that has been filtered by the given specifications.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pyspark.sql.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.split_utils.process_split_ratio">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.split_utils.</span></span><span class="sig-name descname"><span class="pre">process_split_ratio</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ratio</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/split_utils.html#process_split_ratio"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.split_utils.process_split_ratio" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate split ratio lists.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ratio</strong> (<em>float</em><em> or </em><em>list</em>) – a float number that indicates split ratio or a list of float</p></li>
<li><p><strong>ratios</strong> (<em>numbers that indicate split</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>bool: A boolean variable multi that indicates if the splitting is multi or single.</p></li>
<li><p>list: A list of normalized split ratios.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.split_utils.split_pandas_data_with_ratios">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.split_utils.</span></span><span class="sig-name descname"><span class="pre">split_pandas_data_with_ratios</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ratios</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">42</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shuffle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/split_utils.html#split_pandas_data_with_ratios"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.split_utils.split_pandas_data_with_ratios" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to split pandas DataFrame with given ratios</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Implementation referenced from <a class="reference external" href="https://stackoverflow.com/questions/38250710/how-to-split-data-into-3-sets-train-validation-and-test">this source</a>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>pandas.DataFrame</em>) – Pandas data frame to be split.</p></li>
<li><p><strong>ratios</strong> (<em>list of floats</em>) – list of ratios for split. The ratios have to sum to 1.</p></li>
<li><p><strong>seed</strong> (<em>int</em>) – random seed.</p></li>
<li><p><strong>shuffle</strong> (<em>bool</em>) – whether data will be shuffled when being split.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of pd.DataFrame split by the given specifications.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-recommenders.datasets.sparse">
<span id="sparse-utilities"></span><h2>Sparse utilities<a class="headerlink" href="#module-recommenders.datasets.sparse" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="recommenders.datasets.sparse.AffinityMatrix">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">recommenders.datasets.sparse.</span></span><span class="sig-name descname"><span class="pre">AffinityMatrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">items_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_user</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'userID'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_item</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'itemID'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_rating</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rating'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_pred</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'prediction'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/sparse.html#AffinityMatrix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.sparse.AffinityMatrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate the user/item affinity matrix from a pandas dataframe and vice versa</p>
<p>Initialize class parameters</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – a dataframe containing the data</p></li>
<li><p><strong>items_list</strong> (<em>numpy.ndarray</em>) – a list of unique items to use (if provided)</p></li>
<li><p><strong>col_user</strong> (<em>str</em>) – default name for user column</p></li>
<li><p><strong>col_item</strong> (<em>str</em>) – default name for item column</p></li>
<li><p><strong>col_rating</strong> (<em>str</em>) – default name for rating columns</p></li>
<li><p><strong>save_path</strong> (<em>str</em>) – default path to save item/user maps</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="recommenders.datasets.sparse.AffinityMatrix.gen_affinity_matrix">
<span class="sig-name descname"><span class="pre">gen_affinity_matrix</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/sparse.html#AffinityMatrix.gen_affinity_matrix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.sparse.AffinityMatrix.gen_affinity_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate the user/item affinity matrix.</p>
<p>As a first step, two new columns are added to the input DF, containing the index maps
generated by the gen_index() method. The new indices, together with the ratings, are
then used to generate the user/item affinity matrix using scipy’s sparse matrix method
coo_matrix; for reference see:
<a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.coo_matrix.html">https://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.coo_matrix.html</a>.
The input format is: <cite>coo_matrix((data, (rows, columns)), shape=(rows, columns))</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>User-affinity matrix of dimensions (Nusers, Nitems) in numpy format.
Unrated movies are assigned a value of 0.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>scipy.sparse.coo_matrix</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="recommenders.datasets.sparse.AffinityMatrix.map_back_sparse">
<span class="sig-name descname"><span class="pre">map_back_sparse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kind</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/sparse.html#AffinityMatrix.map_back_sparse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.sparse.AffinityMatrix.map_back_sparse" title="Permalink to this definition">¶</a></dt>
<dd><p>Map back the user/affinity matrix to a pd dataframe</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> (<em>numpy.ndarray</em><em>, </em><em>int32</em>) – user/item affinity matrix</p></li>
<li><p><strong>kind</strong> (<em>string</em>) – specify if the output values are ratings or predictions</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the generated pandas dataframe</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-recommenders.datasets.wikidata">
<span id="knowledge-graph-utilities"></span><h2>Knowledge graph utilities<a class="headerlink" href="#module-recommenders.datasets.wikidata" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.wikidata.find_wikidata_id">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.wikidata.</span></span><span class="sig-name descname"><span class="pre">find_wikidata_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/wikidata.html#find_wikidata_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.wikidata.find_wikidata_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the entity ID in wikidata from a title string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – A string with search terms (eg. “Batman (1989) film”)</p></li>
<li><p><strong>limit</strong> (<em>int</em>) – Number of results to return</p></li>
<li><p><strong>session</strong> (<em>requests.Session</em>) – requests session to reuse connections</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>wikidata entityID corresponding to the title string. ‘entityNotFound’ will be returned if no page is found</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.wikidata.get_session">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.wikidata.</span></span><span class="sig-name descname"><span class="pre">get_session</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/wikidata.html#get_session"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.wikidata.get_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Get session object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>session</strong> (<em>requests.Session</em>) – request session object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>request session object</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>requests.Session</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.wikidata.query_entity_description">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.wikidata.</span></span><span class="sig-name descname"><span class="pre">query_entity_description</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entity_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/wikidata.html#query_entity_description"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.wikidata.query_entity_description" title="Permalink to this definition">¶</a></dt>
<dd><p>Query entity wikidata description from entityID</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>entity_id</strong> (<em>str</em>) – A wikidata page ID.</p></li>
<li><p><strong>session</strong> (<em>requests.Session</em>) – requests session to reuse connections</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Wikidata short description of the entityID
descriptionNotFound’ will be returned if no description is found</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.wikidata.query_entity_links">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.wikidata.</span></span><span class="sig-name descname"><span class="pre">query_entity_links</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entity_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/wikidata.html#query_entity_links"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.wikidata.query_entity_links" title="Permalink to this definition">¶</a></dt>
<dd><p>Query all linked pages from a wikidata entityID</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>entity_id</strong> (<em>str</em>) – A wikidata entity ID</p></li>
<li><p><strong>session</strong> (<em>requests.Session</em>) – requests session to reuse connections</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dictionary with linked pages.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>json</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.wikidata.read_linked_entities">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.wikidata.</span></span><span class="sig-name descname"><span class="pre">read_linked_entities</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/wikidata.html#read_linked_entities"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.wikidata.read_linked_entities" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain lists of liken entities (IDs and names) from dictionary</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>json</em>) – dictionary with linked pages</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>List of liked entityIDs.</p></li>
<li><p>List of liked entity names.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list, list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="recommenders.datasets.wikidata.search_wikidata">
<span class="sig-prename descclassname"><span class="pre">recommenders.datasets.wikidata.</span></span><span class="sig-name descname"><span class="pre">search_wikidata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">names</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extras</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">describe</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recommenders/datasets/wikidata.html#search_wikidata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recommenders.datasets.wikidata.search_wikidata" title="Permalink to this definition">¶</a></dt>
<dd><p>Create DataFrame of Wikidata search results</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>names</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – List of names to search for</p></li>
<li><p><strong>(</strong><strong>dict</strong><strong>(</strong><strong>str</strong> (<em>extras</em>) – list)): Optional extra items to assign to results for corresponding name</p></li>
<li><p><strong>describe</strong> (<em>bool</em>) – Optional flag to include description of entity</p></li>
<li><p><strong>verbose</strong> (<em>bool</em>) – Optional flag to print out intermediate data</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Wikipedia results for all names with found entities</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./source"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            



<div class='prev-next-bottom'>
    

</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By The Jupyter Book community<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>